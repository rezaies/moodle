{"version":3,"sources":["../src/aria.js"],"names":["dropdownFix","focusEnd","setFocusEnd","getFocusEnd","result","keydown","e","trigger","which","arrowUp","escape","expanded","target","getAttribute","preventDefault","click","space","enter","shiftFocus","element","setTimeout","delayedFocus","pendingPromise","focus","resolve","Pending","on","menu","querySelector","menuItems","foundMenuItem","querySelectorAll","length","keypress","String","fromCharCode","toLowerCase","closest","i","item","itemText","text","trim","indexOf","next","arrowDown","home","end","autoFocus","window","addEventListener","alerts","document","Array","prototype","forEach","call","autofocusElement","innerHTML","removeAttribute","updateTabFocus","tabList","vertical","rtl","right_to_left","arrowNext","arrowLeft","arrowRight","arrowPrevious","tabs","filter","tab","getComputedStyle","display","index","keyCode","tabIndex","tabElementFix","includes","matches","init"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Enhancements to Bootstrap components for accessibility.\n *\n * @module     theme_boost/aria\n * @copyright  2018 Damyon Wiese <damyon@moodle.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport {end, escape, arrowUp, arrowDown, arrowLeft, arrowRight, home, enter, space} from 'core/key_codes';\nimport $ from 'jquery';\nimport Pending from 'core/pending';\n\n/**\n * Drop downs from bootstrap don't support keyboard accessibility by default.\n */\nconst dropdownFix = () => {\n    let focusEnd = false;\n    const setFocusEnd = () => {\n        focusEnd = true;\n    };\n    const getFocusEnd = () => {\n        const result = focusEnd;\n        focusEnd = false;\n        return result;\n    };\n\n    // Special handling for \"up\" keyboard control.\n    $('[data-toggle=\"dropdown\"]').keydown(e => {\n        const trigger = e.which;\n\n        // Up key opens the menu at the end.\n        if (trigger == arrowUp) {\n            // Focus the end of the menu, not the beginning.\n            setFocusEnd();\n        }\n\n        // Escape key only closes the menu, it doesn't open it.\n        if (trigger == escape) {\n            const expanded = e.target.getAttribute('aria-expanded');\n            e.preventDefault();\n            if (expanded == \"false\") {\n                e.target.click();\n            }\n        }\n\n        // Space key or Enter key opens the menu.\n        if (trigger == space || trigger == enter) {\n            // Cancel random scroll.\n            e.preventDefault();\n            // Open the menu instead.\n            e.target.click();\n        }\n    });\n\n    // Special handling for navigation keys when menu is open.\n    const shiftFocus = element => {\n        const delayedFocus = pendingPromise => {\n            element.focus();\n            pendingPromise.resolve();\n        };\n        setTimeout(delayedFocus, 50, new Pending('core/aria:delayed-focus'));\n    };\n\n    $('.dropdown').on('shown.bs.dropdown', e => {\n        // We need to focus on the first menuitem.\n        const menu = e.target.querySelector('[role=\"menu\"]');\n        let menuItems = false;\n        let foundMenuItem = false;\n\n        if (menu) {\n            menuItems = menu.querySelectorAll('[role=\"menuitem\"]');\n        }\n        if (menuItems && menuItems.length > 0) {\n            if (getFocusEnd()) {\n                foundMenuItem = menuItems[menuItems.length - 1];\n            } else {\n                // The first menu entry, pretty reasonable.\n                foundMenuItem = menuItems[0];\n            }\n        }\n        if (foundMenuItem) {\n            shiftFocus(foundMenuItem);\n        }\n    });\n    // Search for menu items by finding the first item that has\n    // text starting with the typed character (case insensitive).\n    $('.dropdown [role=\"menu\"] [role=\"menuitem\"]').keypress(e => {\n        const trigger = String.fromCharCode(e.which).toLowerCase();\n        const menu = e.target.closest('[role=\"menu\"]');\n\n        if (!menu) {\n            return;\n        }\n        const menuItems = menu.querySelectorAll('[role=\"menuitem\"]');\n        if (!menuItems) {\n            return;\n        }\n\n        for (let i = 0; i < menuItems.length; i++) {\n            const item = menuItems[i];\n            const itemText = item.text.trim().toLowerCase();\n            if (itemText.indexOf(trigger) == 0) {\n                shiftFocus(item);\n                break;\n            }\n        }\n    });\n\n    // Keyboard navigation for arrow keys, home and end keys.\n    $('.dropdown [role=\"menu\"] [role=\"menuitem\"]').keydown(function(e) {\n        const trigger = e.which;\n        let next = false;\n        const menu = e.target.closest('[role=\"menu\"]');\n\n        if (!menu) {\n            return;\n        }\n        const menuItems = menu.querySelectorAll('[role=\"menuitem\"]');\n        if (!menuItems) {\n            return;\n        }\n        // Down key.\n        if (trigger == arrowDown) {\n            for (let i = 0; i < menuItems.length - 1; i++) {\n                if (menuItems[i] == e.target) {\n                    next = menuItems[i + 1];\n                    break;\n                }\n            }\n            if (!next) {\n                // Wrap to first item.\n                next = menuItems[0];\n            }\n\n        } else if (trigger == arrowUp) {\n            // Up key.\n            for (let i = 1; i < menuItems.length; i++) {\n                if (menuItems[i] == e.target) {\n                    next = menuItems[i - 1];\n                    break;\n                }\n            }\n            if (!next) {\n                // Wrap to last item.\n                next = menuItems[menuItems.length - 1];\n            }\n\n        } else if (trigger == home) {\n            // Home key.\n            next = menuItems[0];\n\n        } else if (trigger == end) {\n            // End key.\n            next = menuItems[menuItems.length - 1];\n        }\n        // Variable next is set if we do want to act on the keypress.\n        if (next) {\n            e.preventDefault();\n            shiftFocus(next);\n        }\n        return;\n    });\n    $('.dropdown').on('hidden.bs.dropdown', e => {\n        // We need to focus on the menu trigger.\n        const trigger = e.target.querySelector('[data-toggle=\"dropdown\"]');\n        if (trigger) {\n            shiftFocus(trigger);\n        }\n    });\n};\n\n/**\n * After page load, focus on any element with special autofocus attribute.\n */\nconst autoFocus = () => {\n    window.addEventListener(\"load\", () => {\n        const alerts = document.querySelectorAll('[data-aria-autofocus=\"true\"][role=\"alert\"]');\n        Array.prototype.forEach.call(alerts, autofocusElement => {\n            // According to the specification an role=\"alert\" region is only read out on change to the content\n            // of that region.\n            autofocusElement.innerHTML += ' ';\n            autofocusElement.removeAttribute('data-aria-autofocus');\n        });\n    });\n};\n\n/**\n * Changes the focus to the correct tab based on the key that is pressed.\n * @param {KeyboardEvent} e\n */\nconst updateTabFocus = e => {\n    const tabList = e.target.closest('[role=\"tablist\"]');\n    const vertical = tabList.getAttribute('aria-orientation') == 'vertical';\n    const rtl = window.right_to_left();\n    const arrowNext = vertical ? arrowDown : (rtl ? arrowLeft : arrowRight);\n    const arrowPrevious = vertical ? arrowUp : (rtl ? arrowRight : arrowLeft);\n    const tabs = Array.prototype.filter.call(\n        tabList.querySelectorAll('[role=\"tab\"]'),\n        tab => getComputedStyle(tab).display !== 'none'); // We only work with the visible tabs.\n\n    for (let i = 0; i < tabs.length; i++) {\n        tabs[i].index = i;\n    }\n\n    switch (e.keyCode) {\n        case arrowNext:\n            e.preventDefault();\n            if (e.target.index !== undefined && tabs[e.target.index + 1]) {\n                tabs[e.target.index + 1].focus();\n            } else {\n                tabs[0].focus();\n            }\n            break;\n        case arrowPrevious:\n            e.preventDefault();\n            if (e.target.index !== undefined && tabs[e.target.index - 1]) {\n                tabs[e.target.index - 1].focus();\n            } else {\n                tabs[tabs.length - 1].focus();\n            }\n            break;\n        case home:\n            e.preventDefault();\n            tabs[0].focus();\n            break;\n        case end:\n            e.preventDefault();\n            tabs[tabs.length - 1].focus();\n            break;\n        case enter:\n        case space:\n            e.preventDefault();\n            $(e.target).tab('show');\n            tabs.forEach(tab => {\n                tab.tabIndex = -1;\n            });\n            e.target.tabIndex = 0;\n    }\n};\n\n/**\n * Fix accessibility issues regarding tab elements focus and their tab order in Bootstrap navs.\n */\nconst tabElementFix = function() {\n    document.addEventListener('keydown', e => {\n        if ([arrowUp, arrowDown, arrowLeft, arrowRight, home, end, enter, space].includes(e.keyCode)) {\n            if (e.target.matches('[role=\"tablist\"] [role=\"tab\"]')) {\n                updateTabFocus(e);\n            }\n        }\n    });\n\n    document.addEventListener('click', e => {\n        if (e.target.matches('[role=\"tablist\"] [role=\"tab\"]')) {\n            const tabs = e.target.closest('[role=\"tablist\"]').querySelectorAll('[role=\"tab\"]');\n            e.preventDefault();\n            $(e.target).tab('show');\n            tabs.forEach(tab => {\n                tab.tabIndex = -1;\n            });\n            e.target.tabIndex = 0;\n        }\n    });\n};\n\nexport const init = () => {\n    dropdownFix();\n    autoFocus();\n    tabElementFix();\n};\n"],"file":"aria.min.js"}